<<<<<<< HEAD
# پروژه پیش‌بینی سری زمانی فروش فروشگاه‌های InnovateMart

## رویکرد شبیه‌سازی داده‌ها

در این پروژه برای تولید مجموعه داده‌های واقع‌گرایانه فروش روزانه فروشگاه‌های زنجیره‌ای «InnovateMart» از یک کلاس شبیه‌ساز فروش به نام `SalesDataSimulator` استفاده شده است. داده‌ها بین سال‌های ۲۰۲۱ تا ۲۰۲۴ به صورت روزانه برای ۵ فروشگاه مختلف شبیه‌سازی شده‌اند که هر کدام ویژگی‌های منحصربه‌فردی دارند.

### ویژگی‌های مهم شبیه‌سازی

- **تعداد فروشگاه‌ها**: پنج فروشگاه با سایزهای متفاوت (`کوچک`، `متوسط`، `بزرگ`) و جمعیت شهرهای مختلف.

- **فروش پایه و روند رشد**: برای هر فروشگاه فروش پایه تعیین شده (با توجه به سایز فروشگاه و جمعیت شهر) و روند رشد سالانه مثبت و ملایمی در بازه ۵٪ تا ۱۵٪ تعریف شده است.

- **الگوهای فصلی**: شبیه‌سازی افزایش فروش در آخر هفته‌ها (جمعه و شنبه) و جهش فروش در دو ماه آخر سال.

- **پروموشن‌ها**: رویدادهای تبلیغاتی از قبل برای هر فروشگاه به صورت بازه‌های زمانی مشخص تعریف شده که در آنها فروش به طور قابل توجهی افزایش می‌یابد.

- **شوک خارجی**: فروشگاه شماره ۳ از تاریخی مشخص دچار کاهش دائمی ۳۵٪ در فروش شده است که به افتتاح یک رقیب جدید مرتبط است.

- **نویز محیطی**: به داده‌های فروش نویز طبیعی (صوتی و یکنواخت) اضافه شده تا شبیه‌سازی واقع‌گرایانه‌تر شود.

- **ویژگی‌های کمکی**: اطلاعات کمکی مانند روز هفته (تعطیلی یا آخر هفته)، ماه، سال و پروموشن فعال به صورت ویژگی‌های دسته‌ای (Categorical) ذخیره شده‌اند.

### خروجی شبیه‌سازی

خروجی شبیه‌سازی یک `Pandas DataFrame` در قالب طولانی (long format) شامل ستون‌های زیر است:

- تاریخ (Date)
- شناسه فروشگاه (store_id)
- فروش روزانه (daily_sales)
- پروموشن فعال (promotion_active)
- اندازه فروشگاه (store_size)
- جمعیت شهر (city_population)
- سایر ویژگی‌های کمکی

این داده‌ها آماده برای آموزش مدل‌های سری زمانی می‌باشند.

---

## آموزش مدل  

برای اجرای آموزش مدل و آماده‌سازی داده‌ها، کافیست فایل `train_app.py` را اجرا کنید. این فایل شامل مراحل زیر است:

- شبیه‌سازی داده‌های فروش با استفاده از `SalesDataSimulator`
- آماده‌سازی داده‌ها و ساخت دیتاست‌های آموزش و ارزیابی با `SalesDataPreparer`
- آموزش مدل `TemporalFusionTransformer` با `SalesModelTrainer`
- ذخیره مدل آموزش‌دیده در پوشه `models/`
- ذخیره داده‌های فروش شبیه‌سازی‌شده در پوشه 'data/' 


## دستورالعمل نحوه نصب وابستگی‌ها و اجرای اپلیکیشن Streamlit

برای اجرای این پروژه ابتدا باید وابستگی‌های مورد نیاز را نصب کنید. کلیه کتابخانه‌های مورد استفاده در پروژه در فایل `requirements.txt` لیست شده‌اند.

### مراحل نصب وابستگی‌ها

#### ایجاد محیط مجازی (توصیه‌شده)

برای جلوگیری از تداخل نسخه‌های کتابخانه‌ها، ابتدا یک محیط مجازی جدید بسازید و آن را فعال کنید:

- **در ویندوز:**

python -m venv env
env\Scripts\activate


- **در لینوکس یا مک:**

python3 -m venv env
source env/bin/activate


#### نصب کتابخانه‌ها از فایل requirements.txt

پس از فعال کردن محیط مجازی دستور زیر را اجرا کنید تا تمامی کتابخانه‌های مورد نیاز نصب شوند:

pip install -r requirements.txt


#### نحوه اجرای کد آموزش مدل

در ترمینال یا کامندلاین به دایرکتوری پروژه مراجعه کنید و پس از فعالسازی محیط مجازی، دستور زیر را اجرا کنید:


python train_app.py


با اجرای این دستور، فرآیند شبیه‌سازی داده‌ها، آماده‌سازی و آموزش مدل شروع می‌شود و پیام‌های پیشرفت نمایش داده می‌شود. پس از پایان، مدل در مسیر `models/` ذخیره می‌شود و آماده استفاده در اپلیکیشن Streamlit خواهد بود.



### اجرای اپلیکیشن Streamlit

برای اجرای اپلیکیشن در محیط توسعه، کافی است دستور زیر را اجرا کنید:

streamlit run streamlit_app.py


این دستور اپلیکیشن را اجرا کرده و یک آدرس محلی در ترمینال نمایش می‌دهد که می‌توانید آن را در مرورگر باز کنید و اپلیکیشن را مشاهده و با آن تعامل داشته باشید.

---